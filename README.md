# AI Worker

**Auto AI** ‚Äî —Ü–µ —Å–∫—Ä–∏–ø—Ç –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ—ó –æ–±—Ä–æ–±–∫–∏ AI-–∑–∞–ø–∏—Ç—ñ–≤ –∑–∞ –¥–æ–ø–æ–º–æ–≥–æ—é **Ollama** —ñ –º–æ–¥–µ–ª—ñ `deepseek-coder:6.7b`.  
–°–∏—Å—Ç–µ–º–∞ –æ—Ç—Ä–∏–º—É—î –∑–∞–ø–∏—Ç–∏ —á–µ—Ä–µ–∑ API, –≥–µ–Ω–µ—Ä—É—î –≤—ñ–¥–ø–æ–≤—ñ–¥—ñ —Ç–∞ –≤—ñ–¥–ø—Ä–∞–≤–ª—è—î —ó—Ö –Ω–∞–∑–∞–¥.  
–î–æ–¥–∞—Ç–∫–æ–≤–æ –ø—ñ–¥—Ç—Ä–∏–º—É—î—Ç—å—Å—è **TTS** –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü—ñ—ó –≥–æ–ª–æ—Å–æ–≤–∏—Ö –≤—ñ–¥–ø–æ–≤—ñ–¥–µ–π —Ç–∞ **Whisper** –¥–ª—è —Ä–æ–∑–ø—ñ–∑–Ω–∞–≤–∞–Ω–Ω—è –∞—É–¥—ñ–æ.

---

## **–í–∏–º–æ–≥–∏**
–ü–µ—Ä–µ–¥ –∑–∞–ø—É—Å–∫–æ–º –ø–µ—Ä–µ–∫–æ–Ω–∞–π—Ç–µ—Å—è, —â–æ —É –≤–∞—Å –≤—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ:

- Python **3.9 - 3.11**  
- –í—ñ—Ä—Ç—É–∞–ª—å–Ω–µ —Å–µ—Ä–µ–¥–æ–≤–∏—â–µ (**—Ä–µ–∫–æ–º–µ–Ω–¥–æ–≤–∞–Ω–æ**)  
- –ë—ñ–±–ª—ñ–æ—Ç–µ–∫–∞ `requests`  
- **Ollama** —ñ–∑ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–æ—é –º–æ–¥–µ–ª–ª—é `deepseek-coder:6.7b`  
- **TTS** –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü—ñ—ó –≥–æ–ª–æ—Å–æ–≤–∏—Ö –≤—ñ–¥–ø–æ–≤—ñ–¥–µ–π (–Ω–µ–æ–±–æ–≤‚Äô—è–∑–∫–æ–≤–æ)  
- **Whisper** –¥–ª—è —Ä–æ–∑–ø—ñ–∑–Ω–∞–≤–∞–Ω–Ω—è –º–æ–≤–∏ –∑ –∞—É–¥—ñ–æ (–Ω–µ–æ–±–æ–≤‚Äô—è–∑–∫–æ–≤–æ)  

---

## **–í—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—è**
### **1. –ö–ª–æ–Ω—É–π—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä—ñ–π**
```bash
git clone https://github.com/WebArtWork/ai-worker.git
cd ai-worker
```

### **2. –°—Ç–≤–æ—Ä—ñ—Ç—å —Ç–∞ –∞–∫—Ç–∏–≤—É–π—Ç–µ –≤—ñ—Ä—Ç—É–∞–ª—å–Ω–µ —Å–µ—Ä–µ–¥–æ–≤–∏—â–µ**
```bash
python3.9 -m venv myenv
source myenv/bin/activate
```

### **3. –í—Å—Ç–∞–Ω–æ–≤—ñ—Ç—å –Ω–µ–æ–±—Ö—ñ–¥–Ω—ñ –∑–∞–ª–µ–∂–Ω–æ—Å—Ç—ñ**
```bash
pip install requests torch torchvision torchaudio
```

### **4. –ó–∞–ø—É—Å—Ç—ñ—Ç—å Ollama —Ç–∞ –∑–∞–≤–∞–Ω—Ç–∞–∂—Ç–µ –º–æ–¥–µ–ª—å**
```bash
ollama pull deepseek-coder:6.7b
ollama serve &
```

---

## **–ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è TTS (Text-to-Speech)**

–Ø–∫—â–æ –≤–∞–º –ø–æ—Ç—Ä—ñ–±–Ω–æ **–≥–µ–Ω–µ—Ä—É–≤–∞—Ç–∏ –∞—É–¥—ñ–æ-–≤—ñ–¥–ø–æ–≤—ñ–¥—ñ**, –≤—Å—Ç–∞–Ω–æ–≤—ñ—Ç—å **TTS**.

### **1. –í—Å—Ç–∞–Ω–æ–≤—ñ—Ç—å `TTS` —Ç–∞ –Ω–µ–æ–±—Ö—ñ–¥–Ω—ñ –∑–∞–ª–µ–∂–Ω–æ—Å—Ç—ñ**
```bash
pip install TTS
```

### **2. –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ, —á–∏ `TTS` –≤—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ –ø—Ä–∞–≤–∏–ª—å–Ω–æ**
```bash
python -c "from TTS.api import TTS; print(TTS.list_models())"
```

### **3. –ì–µ–Ω–µ—Ä—É–π—Ç–µ –∞—É–¥—ñ–æ-—Ñ–∞–π–ª**
```bash
tts --model_name tts_models/en/ljspeech/tacotron2-DDC --text "Hello, world!" --out_path output.wav
```

### **4. –í–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è `TTS` —É Python**
```python
from TTS.api import TTS

tts = TTS("tts_models/en/ljspeech/tacotron2-DDC")
tts.tts_to_file(text="Hello, this is an AI-generated voice.", file_path="output.wav")
```

---

## **–ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è Whisper (Speech-to-Text)**

**Whisper** ‚Äî —Ü–µ AI-–º–æ–¥–µ–ª—å –≤—ñ–¥ OpenAI –¥–ª—è —Ä–æ–∑–ø—ñ–∑–Ω–∞–≤–∞–Ω–Ω—è –º–æ–≤–∏ –∑ –∞—É–¥—ñ–æ—Ñ–∞–π–ª—ñ–≤.  
–¶—è —Å–µ–∫—Ü—ñ—è –¥–æ–ø–æ–º–æ–∂–µ –Ω–∞–ª–∞—à—Ç—É–≤–∞—Ç–∏ —Ç–∞ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ —ó—ó.

### **1. –í—Å—Ç–∞–Ω–æ–≤—ñ—Ç—å Whisper**
```bash
pip install openai-whisper
```

### **2. –í—Å—Ç–∞–Ω–æ–≤—ñ—Ç—å FFmpeg (–Ω–µ–æ–±—Ö—ñ–¥–Ω–æ –¥–ª—è –æ–±—Ä–æ–±–∫–∏ –∞—É–¥—ñ–æ)**
```bash
sudo apt update
sudo apt install ffmpeg
```

### **3. –ó–∞–≤–∞–Ω—Ç–∞–∂—Ç–µ –º–æ–¥–µ–ª—å**
Whisper –ø—ñ–¥—Ç—Ä–∏–º—É—î –∫—ñ–ª—å–∫–∞ –º–æ–¥–µ–ª–µ–π (`tiny`, `base`, `small`, `medium`, `large`).  
–ß–∏–º **–±—ñ–ª—å—à–∞ –º–æ–¥–µ–ª—å**, —Ç–∏–º **–∫—Ä–∞—â–∞ —Ç–æ—á–Ω—ñ—Å—Ç—å**, –∞–ª–µ **–¥–æ–≤—à–µ –æ–±—Ä–æ–±–∫–∞**.

–ù–∞–ø—Ä–∏–∫–ª–∞–¥, –¥–ª—è **"medium"** –º–æ–¥–µ–ª—ñ:
```bash
whisper --model medium
```

### **4. –†–æ–∑–ø—ñ–∑–Ω–∞–π—Ç–µ —Ç–µ–∫—Å—Ç –∑ –∞—É–¥—ñ–æ—Ñ–∞–π–ª—É**
```bash
whisper output.wav --model medium
```

### **5. –í–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è Whisper —É Python**
```python
import whisper

model = whisper.load_model("medium")  # –∞–±–æ "small", "large"
result = model.transcribe("output.wav")
print("–†–æ–∑–ø—ñ–∑–Ω–∞–Ω–∏–π —Ç–µ–∫—Å—Ç:", result["text"])
```

---

## **–ó–∞–ø—É—Å–∫**

### **1. –ü–µ—Ä–µ–∫–æ–Ω–∞–π—Ç–µ—Å—è, —â–æ –ø—Ä–æ—Ü–µ—Å –Ω–µ –∑–∞–ø—É—â–µ–Ω–∏–π**
```bash
ps aux | grep auto_ai.py
```
–Ø–∫—â–æ –ø—Ä–æ—Ü–µ—Å –ø—Ä–∞—Ü—é—î, –π–æ–≥–æ –º–æ–∂–Ω–∞ –∑–∞–≤–µ—Ä—à–∏—Ç–∏:
```bash
kill -9 $(pgrep -f auto_ai.py)
```

### **2. –ó–∞–ø—É—Å—Ç—ñ—Ç—å —Å–∫—Ä–∏–ø—Ç —É —Ñ–æ–Ω—ñ**
```bash
nohup python3 auto_ai.py > log.txt 2>&1 &
```

---

## **API –ï–Ω–¥–ø–æ—ñ–Ω—Ç–∏**
### **–û—Ç—Ä–∏–º–∞–Ω–Ω—è —Å–ø–∏—Å–∫—É AI-–∑–∞–ø–∏—Ç—ñ–≤**
- **GET** `https://webart.work/api/ai/get`
- –í—ñ–¥–ø–æ–≤—ñ–¥—å: –ú–∞—Å–∏–≤ –∑–∞–ø–∏—Ç—ñ–≤

### **–ù–∞–¥—Å–∏–ª–∞–Ω–Ω—è –≤—ñ–¥–ø–æ–≤—ñ–¥—ñ –Ω–∞ –∑–∞–ø–∏—Ç**
- **POST** `https://webart.work/api/ai/update`
- –û—á—ñ–∫—É—î `{ _id, answer }`

---

## **–û—Å–Ω–æ–≤–Ω–∏–π —Ü–∏–∫–ª —Ä–æ–±–æ—Ç–∏**
–°–∫—Ä–∏–ø—Ç –ø—Ä–∞—Ü—é—î —É –Ω–µ—Å–∫—ñ–Ω—á–µ–Ω–Ω–æ–º—É —Ü–∏–∫–ª—ñ:
1. –û—Ç—Ä–∏–º—É—î —Å–ø–∏—Å–æ–∫ –Ω–æ–≤–∏—Ö –∑–∞–ø–∏—Ç—ñ–≤.
2. –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î –º–æ–¥–µ–ª—å **`deepseek-coder:6.7b`** –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü—ñ—ó –≤—ñ–¥–ø–æ–≤—ñ–¥—ñ.
3. –Ø–∫—â–æ —É–≤—ñ–º–∫–Ω–µ–Ω–æ **TTS**, –∫–æ–Ω–≤–µ—Ä—Ç—É—î —Ç–µ–∫—Å—Ç —É –≥–æ–ª–æ—Å.
4. –Ø–∫—â–æ —É–≤—ñ–º–∫–Ω–µ–Ω–æ **Whisper**, —Ä–æ–∑–ø—ñ–∑–Ω–∞—î —Ç–µ–∫—Å—Ç –∑ –∞—É–¥—ñ–æ.
5. –í—ñ–¥–ø—Ä–∞–≤–ª—è—î –≤—ñ–¥–ø–æ–≤—ñ–¥—å —á–µ—Ä–µ–∑ API.
6. –ü–æ–≤—Ç–æ—Ä—é—î –ø—Ä–æ—Ü–µ—Å –∫–æ–∂–Ω—ñ **10 —Å–µ–∫—É–Ω–¥**.

---

## **–õ–æ–≥–∏**
–í—Å—ñ –ª–æ–≥–∏ –∑–±–µ—Ä—ñ–≥–∞—é—Ç—å—Å—è —É —Ñ–∞–π–ª—ñ `log.txt`.  
–ü–µ—Ä–µ–≥–ª—è–Ω—É—Ç–∏ –æ—Å—Ç–∞–Ω–Ω—ñ –∑–∞–ø–∏—Å–∏ –º–æ–∂–Ω–∞ —Ç–∞–∫:
```bash
tail -f log.txt
```

---

## **–ó–∞–≤–µ—Ä—à–µ–Ω–Ω—è —Ä–æ–±–æ—Ç–∏**
–©–æ–± –∑—É–ø–∏–Ω–∏—Ç–∏ —Ä–æ–±–æ—Ç—É —Å–∫—Ä–∏–ø—Ç–∞:
```bash
kill -9 $(pgrep -f auto_ai.py)
```

---

### **üîπ –î–æ–¥–∞—Ç–∫–æ–≤–æ**
- –Ø–∫—â–æ –≤–∏–Ω–∏–∫–∞—é—Ç—å –ø–æ–º–∏–ª–∫–∏ –ø—ñ–¥ —á–∞—Å –≤—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—è **TTS**, –ø–µ—Ä–µ–≤—ñ—Ä—Ç–µ –≤–µ—Ä—Å—ñ—é Python:
  ```bash
  python --version
  ```
- –î–µ—è–∫—ñ –º–æ–¥–µ–ª—ñ –º–æ–∂—É—Ç—å –≤–∏–º–∞–≥–∞—Ç–∏ **PyTorch**, –π–æ–≥–æ –º–æ–∂–Ω–∞ –≤—Å—Ç–∞–Ω–æ–≤–∏—Ç–∏ –≤—Ä—É—á–Ω—É:
  ```bash
  pip install torch torchvision torchaudio
  ```
- –©–æ–± –∑–º—ñ–Ω–∏—Ç–∏ –≥–æ–ª–æ—Å —É **TTS**, –ø–µ—Ä–µ–≥–ª—è–Ω—å—Ç–µ —Å–ø–∏—Å–æ–∫ –¥–æ—Å—Ç—É–ø–Ω–∏—Ö –º–æ–¥–µ–ª–µ–π:
  ```bash
  python -c "from TTS.api import TTS; print(TTS.list_models())"
  ```
